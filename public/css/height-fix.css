/* 
 * Height constraints fix
 * Focus on removing all height limitations
 */

/* Remove ALL height constraints */
html, 
body, 
body.viewer-page,
.app-container,
.viewer-content,
.image-gallery,
.image-gallery.grid-view {
  max-height: none !important;
  height: auto !important;
  min-height: 0 !important;
}

/* Set explicit container heights */
html, body {
  min-height: 100vh !important;
}

body.viewer-page .app-container {
  min-height: 100vh !important;
}

body.viewer-page .viewer-content {
  min-height: 100vh !important;
}

/* Force gallery to be non-constrained in height */
body.viewer-page .image-gallery,
body.viewer-page .image-gallery.grid-view {
  min-height: auto !important;
  max-height: none !important;
  height: auto !important;
  position: static !important;
  display: grid !important;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)) !important;
  grid-auto-rows: auto !important;
  grid-auto-flow: row !important;
  /* Large gap to ensure no overlap */
  gap: 60px !important;
  /* Extra padding */
  padding: 60px !important;
  /* Fix overflow properties */
  overflow: visible !important;
  overflow-y: visible !important;
  /* Fix container dimensions */
  width: 100% !important;
  box-sizing: border-box !important;
  /* Highest z-index */
  z-index: 9999 !important;
}

/* Image cards */
body.viewer-page .grid-view .image-card {
  position: relative !important;
  z-index: 1 !important;
  /* Fixed in grid */
  grid-column: auto !important;
  grid-row: auto !important;
  /* Fixed dimensions */
  width: 100% !important;
  height: 0 !important;
  padding-bottom: 100% !important; /* Force aspect ratio */
  max-height: none !important;
  min-height: 0 !important;
  /* Box properties */
  margin: 0 !important;
  overflow: hidden !important;
  box-sizing: border-box !important;
  /* Make it clearly visible */
  border: 3px solid red !important;
}

/* Image styles */
body.viewer-page .grid-view .image-card img.card-image {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
}

/* Force explicit positions for cards to prevent overlap */
body.viewer-page .image-gallery.grid-view .image-card:nth-child(1) { grid-area: 1 / 1 / 2 / 2 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(2) { grid-area: 1 / 2 / 2 / 3 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(3) { grid-area: 1 / 3 / 2 / 4 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(4) { grid-area: 1 / 4 / 2 / 5 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(5) { grid-area: 2 / 1 / 3 / 2 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(6) { grid-area: 2 / 2 / 3 / 3 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(7) { grid-area: 2 / 3 / 3 / 4 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(8) { grid-area: 2 / 4 / 3 / 5 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(9) { grid-area: 3 / 1 / 4 / 2 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(10) { grid-area: 3 / 2 / 4 / 3 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(11) { grid-area: 3 / 3 / 4 / 4 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(12) { grid-area: 3 / 4 / 4 / 5 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(13) { grid-area: 4 / 1 / 5 / 2 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(14) { grid-area: 4 / 2 / 5 / 3 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(15) { grid-area: 4 / 3 / 5 / 4 !important; }
body.viewer-page .image-gallery.grid-view .image-card:nth-child(16) { grid-area: 4 / 4 / 5 / 5 !important; }

/* Mobile adjustments */
@media (max-width: 768px) {
  body.viewer-page .image-gallery.grid-view {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)) !important;
    gap: 20px !important;
    padding: 20px !important;
  }
  
  /* Reset explicit positioning on mobile */
  body.viewer-page .image-gallery.grid-view .image-card {
    grid-area: auto !important;
  }
}
